try(virtualenv_remove("mycelium_torch"), silent = TRUE)
# 2. Create Env
env_name <- "mycelium_torch"
virtualenv_create(env_name, python_version = "3.11")
# libs ----
pacman::p_load(
tidyverse,
rayshader,
ggplot2
)
setwd(this.path::here())
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
print(frame)
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, fill = z)) +
scale_fill_gradientn(colours = terrain.colors(10)) +
ggpubr::theme_classic2() +
theme(legend.position = "none")
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
# main algorithm ----
# take a number series
generate_embedding <- function(number_series, tau, m) {
burn_in_period <- 1 + (m - 1) * tau
if (length(number_series) < burn_in_period) {
return(list())
}
valid_idx <- burn_in_period:length(number_series)
embedding <- map(valid_idx, function(t) {
offsets <- (0:(m - 1)) * tau
indices <- t - offsets
number_series[indices]
})
return(embedding)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
print(frame)
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, fill = z)) +
ggpubr::theme_classic2() +
theme(legend.position = "none")
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
print(frame)
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, fill = z)) +
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
print(frame)
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, fill = z), shape = 21) +
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
print(frame)
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, fill = z), shape = 21) +
theme(legend.position = "none") +
ggpubr::theme_classic2()
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(three_dim_p)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, fill = z), shape = 21) +
ggpubr::theme_classic2() +
theme(legend.position = "none")
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(three_dim_p)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, color = z)) +
ggpubr::theme_classic2() +
theme(legend.position = "none")
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(three_dim_p)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, color = z)) +
ggpubr::theme_classic2() +
theme(legend.position = "none")
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(ggplot)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, color = z)) +
ggpubr::theme_classic2() +
theme(legend.position = "none")
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, color = z)) +
ggpubr::theme_classic2() +
theme(legend.position = "none")
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(three_dim_p)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, color = z)) +
ggpubr::theme_classic2()
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(three_dim_p)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot() +
geom_point(aes(x = x, y = y, color = z))
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(three_dim_p)
}
# test ----
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
geom_point(shape = 15, size = 5)
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
geom_point(shape = 15, size = 5) +
coord_equal()
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
geom_point(shape = 15, size = 5) +
coord_equal()
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
geom_point(shape = 15, size = 5) +
coord_equal() +
theme_map() +
theme(legend.position = "none")
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
geom_point(shape = 15, size = 5) +
coord_equal() +
ggpubr::theme_classic2() +
theme(legend.position = "none")
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
geom_point(shape = 15, size = 5) +
coord_equal() +
ggpubr::theme_classic2() +
theme(legend.position = "none") +
scale_color_viridis()
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
geom_point(shape = 15, size = 5) +
coord_equal() +
ggpubr::theme_classic2() +
theme(legend.position = "none") +
viridis::scale_color_viridis()
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
geom_point(shape = 15, size = 5) +
coord_equal() +
ggpubr::theme_classic2() +
theme(legend.position = "none") +
viridis::scale_color_viridis()
ggpubr::theme_classic2()
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(three_dim_p)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
plot_embedding(generate_embedding(rnorm(n = 1000, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, color = z)) +
stat_density_2d(geom = "polygon", aes(fill = after_stat(level))) +
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, fill = z)) +
stat_density_2d(geom = "polygon", aes(fill = after_stat(level))) +
ggpubr::theme_classic2()
# three_dim_p <- plot_gg(
#     ggobj = gg_plot,
#     multicore = TRUE,
#     raytrace = TRUE
# )
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, fill = z)) +
stat_density_2d(geom = "polygon", aes(fill = after_stat(level))) +
theme(legend.position = "none") +
coord_equal() +
ggpubr::theme_classic2()
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
?stat_density_2d
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, fill = z)) +
stat_density_2d(
geom = "polygon",
aes(fill = after_stat(level)),
n = 200,
bins = 50
) +
coord_equal() +
ggpubr::theme_classic2() +
theme(legend.position = "none")
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, fill = z)) +
stat_density_2d(
geom = "polygon",
aes(fill = after_stat(level)),
n = 200,
bins = 50
) +
coord_equal() +
ggpubr::theme_classic2() +
theme(legend.position = "none") +
viridis::scale_fill_viridis_c()
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
viridis::scale_fill_viridis()
# helper functions ----
plot_embedding <- function(embedding) {
frame <- map_dfr(embedding, ~ as_tibble(t(.x)) %>%
set_names(c("x", "y", "z")))
gg_plot <- frame %>%
ggplot(aes(x = x, y = y, fill = z)) +
stat_density_2d(
geom = "polygon",
aes(fill = after_stat(level)),
n = 200,
bins = 50
) +
coord_equal() +
ggpubr::theme_classic2() +
theme(legend.position = "none") +
viridis::scale_fill_viridis()
three_dim_p <- plot_gg(
ggobj = gg_plot,
multicore = TRUE,
raytrace = TRUE
)
return(gg_plot)
}
plot_embedding(generate_embedding(rnorm(n = 100, mean = 0, sd = 1), 3, 3))
plot_embedding(generate_embedding(rnorm(n = 100, mean = 10, sd = 1), 3, 3))
plot_embedding(generate_embedding(rnorm(n = 100, mean = 10, sd = 1), 1, 3))
rep(c(1,2,3,2,1))
rep(c(1,2,3,3,2,1))
rep(c(1,2,3,3,2,1), x = 10)
rep(c(1,2,3,3,2,1), times = 2)
plot_embedding(generate_embedding(rep(c(1, 2, 3, 3, 2, 1), times = 10), 1, 3))
plot_embedding(generate_embedding(rep(c(1, 2, 3, 3, 2, 1), times = 10), 3, 3))
plot_embedding(generate_embedding(runif(n = 100, min = 0, max = 1), 3, 3))
plot_embedding(generate_embedding(runif(n = 100, min = 0, max = 1), 3, 3))
